// js/widgets/mosaic.ts
import {
  parseSpec
} from "https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm";
import { throttle } from "https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm";

// js/context/index.ts
import { wasmConnector } from "https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm";
import {
  InstantiateContext,
  PlotAttributeNode,
  LiteralNode
} from "https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm";

// js/context/duckdb.ts
import {
  getJsDelivrBundles,
  selectBundle,
  AsyncDuckDB,
  ConsoleLogger,
  LogLevel
} from "https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm";
async function initDuckdb() {
  const JSDELIVR_BUNDLES = getJsDelivrBundles();
  const bundle = await selectBundle(JSDELIVR_BUNDLES);
  const worker_url = URL.createObjectURL(
    new Blob([`importScripts("${bundle.mainWorker}");`], {
      type: "text/javascript"
    })
  );
  const worker = new Worker(worker_url);
  const logger = new ConsoleLogger(LogLevel.WARNING);
  const db = new AsyncDuckDB(logger, worker);
  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);
  URL.revokeObjectURL(worker_url);
  return db;
}
async function waitForTable(conn, table, { timeout = 1e4, interval = 250 } = {}) {
  const t0 = performance.now();
  while (true) {
    try {
      const res = await conn.query(
        `SELECT 1
           FROM information_schema.tables
         WHERE table_schema = 'main'
           AND table_name   = '${table}'
         LIMIT 1`
      );
      if (res.numRows) return;
    } catch (err) {
      console.log(
        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`
      );
    }
    if (performance.now() - t0 > timeout) {
      throw new Error(`Timed out waiting for table "${table}"`);
    }
    await new Promise((r) => setTimeout(r, interval));
  }
}

// js/inputs/input.ts
import {
  coordinator,
  MosaicClient
} from "https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm";
function input(InputClass, ...params) {
  const input2 = new InputClass(...params);
  coordinator().connect(input2);
  return input2.element;
}
var Input = class extends MosaicClient {
  constructor(filterBy, element, className = "input") {
    super(filterBy);
    this.element = element || document.createElement("div");
    if (className) this.element.setAttribute("class", className);
    Object.defineProperty(this.element, "value", { value: this });
  }
  activate() {
  }
};

// js/inputs/radio.ts
var Radio = class extends Input {
  constructor(options) {
    super(options.filterBy, options.element);
    const strongEl = window.document.createElement("strong");
    strongEl.innerText = "STRONG";
    this.element.appendChild(strongEl);
  }
};

// js/inputs/index.ts
var CUSTOM_INPUTS = {
  radio: (options) => input(Radio, options)
};

// js/context/index.ts
var VizContext = class extends InstantiateContext {
  constructor(conn_) {
    const styleAttrib = new PlotAttributeNode("attribute");
    styleAttrib.name = "style";
    styleAttrib.value = new LiteralNode({
      fontSize: "12px"
    });
    super({
      plotDefaults: [styleAttrib]
    });
    this.conn_ = conn_;
    this.tables_ = /* @__PURE__ */ new Set();
    this.api = { ...this.api, ...CUSTOM_INPUTS };
    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));
  }
  async insertTable(table, data) {
    await this.conn_?.insertArrowFromIPCStream(data, {
      name: table,
      create: true
    });
    this.tables_.add(table);
  }
  async waitForTable(table) {
    await waitForTable(this.conn_, table);
  }
};
var VIZ_CONTEXT_KEY = Symbol.for("@@inspect-viz-context");
async function vizContext() {
  const globalScope = typeof window !== "undefined" ? window : globalThis;
  if (!globalScope[VIZ_CONTEXT_KEY]) {
    globalScope[VIZ_CONTEXT_KEY] = (async () => {
      const duckdb = await initDuckdb();
      const conn = await duckdb.connect();
      return new VizContext(conn);
    })();
  }
  return globalScope[VIZ_CONTEXT_KEY];
}

// js/widgets/mosaic.ts
async function render({ model, el }) {
  const tables = model.get("tables") || {};
  await syncTables(tables);
  const renderOptions = renderSetup(el);
  const ctx = await vizContext();
  const inputs = new Set(
    ["menu", "search", "slider", "table"].concat(Object.keys(CUSTOM_INPUTS))
  );
  const spec = JSON.parse(model.get("spec"));
  if (renderOptions.autoFillScrolling && isOutputSpec(spec)) {
    el.style.width = "100%";
    el.style.height = "400px";
  }
  const renderSpec = async () => {
    const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;
    const ast = parseSpec(targetSpec, { inputs });
    const specEl = await astToDOM(ast, ctx);
    el.innerHTML = "";
    el.appendChild(specEl);
  };
  await renderSpec();
  if (renderOptions.autoFill) {
    const resizeObserver = new ResizeObserver(throttle(renderSpec));
    resizeObserver.observe(el);
    return () => {
      resizeObserver.disconnect();
    };
  }
}
async function syncTables(tables) {
  const ctx = await vizContext();
  for (const [tableName, base64Data] of Object.entries(tables)) {
    if (base64Data) {
      const binaryString = atob(base64Data);
      const bytes = new Uint8Array(binaryString.length);
      for (let i = 0; i < binaryString.length; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      await ctx.insertTable(tableName, bytes);
    } else {
      await ctx.waitForTable(tableName);
    }
  }
}
function renderSetup(containerEl) {
  const widgetEl = containerEl.closest(".widget-subarea");
  if (widgetEl) {
    widgetEl.style.marginBottom = "0";
  }
  const autoFill = window.document.body.classList.contains("quarto-dashboard");
  const autoFillScrolling = autoFill && !window.document.body.classList.contains("dashboard-fill");
  return { autoFill, autoFillScrolling };
}
function responsiveSpec(spec, containerEl) {
  spec = structuredClone(spec);
  if ("plot" in spec) {
    const plot = spec.plot[0];
    if ("width" in plot && "height" in plot) {
      plot.width = containerEl.clientWidth;
      plot.height = containerEl.clientHeight;
    }
  } else if ("hconcat" in spec) {
    const hconcat = spec.hconcat;
    if ("plot" in hconcat[0]) {
      hconcat[0].width = containerEl.clientWidth - 80;
      hconcat[0].height = containerEl.clientHeight;
    }
  } else if ("vconcat" in spec) {
    const vconcat = spec.vconcat;
    if ("plot" in vconcat[0]) {
      vconcat[0].width = containerEl.clientWidth;
      vconcat[0].height = containerEl.clientHeight - 35;
    }
  }
  return spec;
}
function isOutputSpec(spec) {
  if ("plot" in spec) {
    return true;
  } else if ("input" in spec && spec.input === "table") {
    return true;
  } else if ("hconcat" in spec && "plot" in spec.hconcat[0]) {
    return true;
  } else if ("vconcat" in spec && "plot" in spec.vconcat[0]) {
    return true;
  } else {
    return false;
  }
}
async function astToDOM(ast, ctx) {
  for (const [name, node] of Object.entries(ast.params)) {
    if (!ctx.activeParams.has(name)) {
      const param = node.instantiate(ctx);
      ctx.activeParams.set(name, param);
    }
  }
  return ast.root.instantiate(ctx);
}
var mosaic_default = { render };
export {
  mosaic_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vanMvd2lkZ2V0cy9tb3NhaWMudHMiLCAiLi4vLi4vLi4vanMvY29udGV4dC9pbmRleC50cyIsICIuLi8uLi8uLi9qcy9jb250ZXh0L2R1Y2tkYi50cyIsICIuLi8uLi8uLi9qcy9pbnB1dHMvaW5wdXQudHMiLCAiLi4vLi4vLi4vanMvaW5wdXRzL3JhZGlvLnRzIiwgIi4uLy4uLy4uL2pzL2lucHV0cy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBSZW5kZXJQcm9wcyB9IGZyb20gJ0Bhbnl3aWRnZXQvdHlwZXMnO1xuXG5pbXBvcnQge1xuICAgIFNwZWMsXG4gICAgU3BlY05vZGUsXG4gICAgcGFyc2VTcGVjLFxuICAgIEluc3RhbnRpYXRlQ29udGV4dCxcbiAgICBBU1ROb2RlLFxufSBmcm9tICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0B1d2RhdGEvbW9zYWljLXNwZWNAMC4xNi4yLytlc20nO1xuXG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHV3ZGF0YS9tb3NhaWMtY29yZUAwLjE2LjIvK2VzbSc7XG5cbmltcG9ydCB7IHZpekNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0JztcbmltcG9ydCB7IENVU1RPTV9JTlBVVFMgfSBmcm9tICcuLi9pbnB1dHMnO1xuXG5pbnRlcmZhY2UgTW9zYWljUHJvcHMge1xuICAgIHRhYmxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICBzcGVjOiBzdHJpbmc7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlbmRlcih7IG1vZGVsLCBlbCB9OiBSZW5kZXJQcm9wczxNb3NhaWNQcm9wcz4pIHtcbiAgICAvLyBpbnNlcnQvd2FpdCBmb3IgdGFibGVzIHRvIGJlIHJlYWR5XG4gICAgY29uc3QgdGFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gbW9kZWwuZ2V0KCd0YWJsZXMnKSB8fCB7fTtcbiAgICBhd2FpdCBzeW5jVGFibGVzKHRhYmxlcyk7XG5cbiAgICAvLyByZW5kZXIgbW9zYWljIHNwZWNcbiAgICBjb25zdCByZW5kZXJPcHRpb25zID0gcmVuZGVyU2V0dXAoZWwpO1xuICAgIGNvbnN0IGN0eCA9IGF3YWl0IHZpekNvbnRleHQoKTtcbiAgICBjb25zdCBpbnB1dHMgPSBuZXcgU2V0KFxuICAgICAgICBbJ21lbnUnLCAnc2VhcmNoJywgJ3NsaWRlcicsICd0YWJsZSddLmNvbmNhdChPYmplY3Qua2V5cyhDVVNUT01fSU5QVVRTKSlcbiAgICApO1xuICAgIGNvbnN0IHNwZWM6IFNwZWMgPSBKU09OLnBhcnNlKG1vZGVsLmdldCgnc3BlYycpKTtcbiAgICBpZiAocmVuZGVyT3B0aW9ucy5hdXRvRmlsbFNjcm9sbGluZyAmJiBpc091dHB1dFNwZWMoc3BlYykpIHtcbiAgICAgICAgZWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICc0MDBweCc7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlclNwZWMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldFNwZWMgPSByZW5kZXJPcHRpb25zLmF1dG9GaWxsID8gcmVzcG9uc2l2ZVNwZWMoc3BlYywgZWwpIDogc3BlYztcbiAgICAgICAgY29uc3QgYXN0ID0gcGFyc2VTcGVjKHRhcmdldFNwZWMsIHsgaW5wdXRzIH0pO1xuICAgICAgICBjb25zdCBzcGVjRWwgPSBhd2FpdCBhc3RUb0RPTShhc3QsIGN0eCk7XG4gICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBlbC5hcHBlbmRDaGlsZChzcGVjRWwpO1xuICAgIH07XG4gICAgYXdhaXQgcmVuZGVyU3BlYygpO1xuXG4gICAgLy8gaWYgd2UgYXJlIGRvaW5nIGF1dG8tZmlsbCB0aGVuIHJlLXJlbmRlciB3aGVuIHNpemUgY2hhbmdlc1xuICAgIGlmIChyZW5kZXJPcHRpb25zLmF1dG9GaWxsKSB7XG4gICAgICAgIC8vIHJlLXJlbmRlciBvbiBjb250YWluZXIgc2l6ZSBjaGFuZ2VkXG4gICAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHRocm90dGxlKHJlbmRlclNwZWMpKTtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlbCk7XG5cbiAgICAgICAgLy8gY2xlYW51cCByZXNpemUgb2JzZXJ2ZXIgb24gZGlzY29ubmVjdFxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8gaW5zZXJ0L3dhaXQgZm9yIHRhYmxlcyB0byBiZSByZWFkeVxuYXN5bmMgZnVuY3Rpb24gc3luY1RhYmxlcyh0YWJsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcbiAgICBjb25zdCBjdHggPSBhd2FpdCB2aXpDb250ZXh0KCk7XG4gICAgZm9yIChjb25zdCBbdGFibGVOYW1lLCBiYXNlNjREYXRhXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZXMpKSB7XG4gICAgICAgIGlmIChiYXNlNjREYXRhKSB7XG4gICAgICAgICAgICAvLyBkZWNvZGUgYmFzZTY0IHRvIGJ5dGVzXG4gICAgICAgICAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NERhdGEpO1xuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlTdHJpbmcubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaW5zZXJ0IHRhYmxlIGludG8gY29udGV4dFxuICAgICAgICAgICAgYXdhaXQgY3R4Lmluc2VydFRhYmxlKHRhYmxlTmFtZSwgYnl0ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gd2FpdCBmb3IgdGFibGUgaWYgbm8gZGF0YSBwcm92aWRlZFxuICAgICAgICAgICAgYXdhaXQgY3R4LndhaXRGb3JUYWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgUmVuZGVyT3B0aW9ucyB7XG4gICAgYXV0b0ZpbGw6IGJvb2xlYW47XG4gICAgYXV0b0ZpbGxTY3JvbGxpbmc6IGJvb2xlYW47XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNldHVwKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IFJlbmRlck9wdGlvbnMge1xuICAgIC8vIG1vc2FpYyB3aWRnZXRzIGFscmVhZHkgaGF2ZSBzdWZmaWNpZW50IG1hcmdpbi9wYWRkaW5nIHNvIG92ZXJyaWRlXG4gICAgLy8gYW55IGhvc3QgcHJlc2NyaWJlZCBib3R0b20gbWFyZ2luLlxuICAgIGNvbnN0IHdpZGdldEVsID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLndpZGdldC1zdWJhcmVhJykgYXMgSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHdpZGdldEVsKSB7XG4gICAgICAgIHdpZGdldEVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwJztcbiAgICB9XG5cbiAgICAvLyBkZXRlY3Qgd2hldGhlciB3ZSBzaG91bGQgYmUgYXV0by1maWxsaW5nIG91ciBjb250YWluZXJcbiAgICBjb25zdCBhdXRvRmlsbCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygncXVhcnRvLWRhc2hib2FyZCcpO1xuXG4gICAgLy8gZGV0ZWN0IHdoZXRoZXIgd2UgYXJlIGluIGEgc2Nyb2xsaW5nIGxheW91dCB3LyBhdXRvLWZpbGwgKHNvIHdlIG5lZWQgdG8gcHJvdmlkZSBlbGVtZW50IGhlaWdodHMpXG4gICAgY29uc3QgYXV0b0ZpbGxTY3JvbGxpbmcgPVxuICAgICAgICBhdXRvRmlsbCAmJiAhd2luZG93LmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYXNoYm9hcmQtZmlsbCcpO1xuXG4gICAgcmV0dXJuIHsgYXV0b0ZpbGwsIGF1dG9GaWxsU2Nyb2xsaW5nIH07XG59XG5cbi8vIFRPRE86IG11bHRpcGxlIHBsb3RzXG5mdW5jdGlvbiByZXNwb25zaXZlU3BlYyhzcGVjOiBTcGVjLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBTcGVjIHtcbiAgICBzcGVjID0gc3RydWN0dXJlZENsb25lKHNwZWMpO1xuICAgIGlmICgncGxvdCcgaW4gc3BlYykge1xuICAgICAgICBjb25zdCBwbG90ID0gc3BlYy5wbG90WzBdO1xuICAgICAgICBpZiAoJ3dpZHRoJyBpbiBwbG90ICYmICdoZWlnaHQnIGluIHBsb3QpIHtcbiAgICAgICAgICAgIHBsb3Qud2lkdGggPSBjb250YWluZXJFbC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHBsb3QuaGVpZ2h0ID0gY29udGFpbmVyRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICgnaGNvbmNhdCcgaW4gc3BlYykge1xuICAgICAgICBjb25zdCBoY29uY2F0ID0gc3BlYy5oY29uY2F0O1xuICAgICAgICBpZiAoJ3Bsb3QnIGluIGhjb25jYXRbMF0pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGJldHRlciBkeW5hbWljIHNpemluZyBmb3IgbGVnZW5kXG4gICAgICAgICAgICBoY29uY2F0WzBdLndpZHRoID0gY29udGFpbmVyRWwuY2xpZW50V2lkdGggLSA4MDtcbiAgICAgICAgICAgIGhjb25jYXRbMF0uaGVpZ2h0ID0gY29udGFpbmVyRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICgndmNvbmNhdCcgaW4gc3BlYykge1xuICAgICAgICBjb25zdCB2Y29uY2F0ID0gc3BlYy52Y29uY2F0O1xuICAgICAgICBpZiAoJ3Bsb3QnIGluIHZjb25jYXRbMF0pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IElzIHRoZSBsZWdlbmQgYWx3YXlzIDM1IHBpeGVscyBoaWdoXG4gICAgICAgICAgICB2Y29uY2F0WzBdLndpZHRoID0gY29udGFpbmVyRWwuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICB2Y29uY2F0WzBdLmhlaWdodCA9IGNvbnRhaW5lckVsLmNsaWVudEhlaWdodCAtIDM1O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzcGVjO1xufVxuXG5mdW5jdGlvbiBpc091dHB1dFNwZWMoc3BlYzogU3BlYykge1xuICAgIGlmICgncGxvdCcgaW4gc3BlYykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCdpbnB1dCcgaW4gc3BlYyAmJiBzcGVjLmlucHV0ID09PSAndGFibGUnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoJ2hjb25jYXQnIGluIHNwZWMgJiYgJ3Bsb3QnIGluIHNwZWMuaGNvbmNhdFswXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCd2Y29uY2F0JyBpbiBzcGVjICYmICdwbG90JyBpbiBzcGVjLnZjb25jYXRbMF0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYXN0VG9ET00oYXN0OiBTcGVjTm9kZSwgY3R4OiBJbnN0YW50aWF0ZUNvbnRleHQpIHtcbiAgICAvLyBwcm9jZXNzIHBhcmFtL3NlbGVjdGlvbiBkZWZpbml0aW9uc1xuICAgIGZvciAoY29uc3QgW25hbWUsIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKGFzdC5wYXJhbXMpKSB7XG4gICAgICAgIC8vIHNraXAgZGVmaW5pdGlvbnMgd2l0aCBuYW1lcyBhbHJlYWR5IGRlZmluZWRcbiAgICAgICAgaWYgKCFjdHguYWN0aXZlUGFyYW1zLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSAobm9kZSBhcyBBU1ROb2RlKS5pbnN0YW50aWF0ZShjdHgpO1xuICAgICAgICAgICAgY3R4LmFjdGl2ZVBhcmFtcy5zZXQobmFtZSwgcGFyYW0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW5zdGFudGlhdGUgYW5kIHJldHVybiBlbGVtZW50XG4gICAgcmV0dXJuIGFzdC5yb290Lmluc3RhbnRpYXRlKGN0eCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgcmVuZGVyIH07XG4iLCAiaW1wb3J0IHsgQXN5bmNEdWNrREJDb25uZWN0aW9uIH0gZnJvbSAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AZHVja2RiL2R1Y2tkYi13YXNtQDEuMjkuMC8rZXNtJztcblxuaW1wb3J0IHsgd2FzbUNvbm5lY3RvciB9IGZyb20gJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHV3ZGF0YS9tb3NhaWMtY29yZUAwLjE2LjIvK2VzbSc7XG5cbmltcG9ydCB7XG4gICAgSW5zdGFudGlhdGVDb250ZXh0LFxuICAgIFBsb3RBdHRyaWJ1dGVOb2RlLFxuICAgIExpdGVyYWxOb2RlLFxufSBmcm9tICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0B1d2RhdGEvbW9zYWljLXNwZWNAMC4xNi4yLytlc20nO1xuXG5pbXBvcnQgeyBpbml0RHVja2RiLCB3YWl0Rm9yVGFibGUgfSBmcm9tICcuL2R1Y2tkYic7XG5pbXBvcnQgeyBDVVNUT01fSU5QVVRTIH0gZnJvbSAnLi4vaW5wdXRzJztcblxuY2xhc3MgVml6Q29udGV4dCBleHRlbmRzIEluc3RhbnRpYXRlQ29udGV4dCB7XG4gICAgcHJpdmF0ZSByZWFkb25seSB0YWJsZXNfID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNvbm5fOiBBc3luY0R1Y2tEQkNvbm5lY3Rpb24pIHtcbiAgICAgICAgLy8gYnVtcCB1cCB0aGUgZGVmYXVsdCBmb250IHNpemVcbiAgICAgICAgY29uc3Qgc3R5bGVBdHRyaWIgPSBuZXcgUGxvdEF0dHJpYnV0ZU5vZGUoJ2F0dHJpYnV0ZScpO1xuICAgICAgICBzdHlsZUF0dHJpYi5uYW1lID0gJ3N0eWxlJztcbiAgICAgICAgc3R5bGVBdHRyaWIudmFsdWUgPSBuZXcgTGl0ZXJhbE5vZGUoe1xuICAgICAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIHBsb3REZWZhdWx0czogW3N0eWxlQXR0cmliXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXBpID0geyAuLi50aGlzLmFwaSwgLi4uQ1VTVE9NX0lOUFVUUyB9O1xuICAgICAgICB0aGlzLmNvb3JkaW5hdG9yLmRhdGFiYXNlQ29ubmVjdG9yKHdhc21Db25uZWN0b3IoeyBjb25uZWN0aW9uOiB0aGlzLmNvbm5fIH0pKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbnNlcnRUYWJsZSh0YWJsZTogc3RyaW5nLCBkYXRhOiBVaW50OEFycmF5KSB7XG4gICAgICAgIC8vIGluc2VydCB0YWJsZSBpbnRvIGRhdGFiYXNlXG4gICAgICAgIGF3YWl0IHRoaXMuY29ubl8/Lmluc2VydEFycm93RnJvbUlQQ1N0cmVhbShkYXRhLCB7XG4gICAgICAgICAgICBuYW1lOiB0YWJsZSxcbiAgICAgICAgICAgIGNyZWF0ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWRkIHRvIGxpc3Qgb2YgdGFibGVzXG4gICAgICAgIHRoaXMudGFibGVzXy5hZGQodGFibGUpO1xuICAgIH1cblxuICAgIGFzeW5jIHdhaXRGb3JUYWJsZSh0YWJsZTogc3RyaW5nKSB7XG4gICAgICAgIGF3YWl0IHdhaXRGb3JUYWJsZSh0aGlzLmNvbm5fLCB0YWJsZSk7XG4gICAgfVxufVxuXG4vLyBnZXQgdGhlIGdsb2JhbCBjb250ZXh0IGluc3RhbmNlLCBlbnN1cmluZyB3ZSBnZXQgdGhlIHNhbWVcbi8vIGluc3RhbmNlIGV2YWwgYWNyb3NzIGRpZmZlcmVudCBqcyBidW5kbGVzIGxvYWRlZCBpbnRvIHRoZSBwYWdlXG5jb25zdCBWSVpfQ09OVEVYVF9LRVkgPSBTeW1ib2wuZm9yKCdAQGluc3BlY3Qtdml6LWNvbnRleHQnKTtcbmFzeW5jIGZ1bmN0aW9uIHZpekNvbnRleHQoKTogUHJvbWlzZTxWaXpDb250ZXh0PiB7XG4gICAgY29uc3QgZ2xvYmFsU2NvcGU6IGFueSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsVGhpcztcbiAgICBpZiAoIWdsb2JhbFNjb3BlW1ZJWl9DT05URVhUX0tFWV0pIHtcbiAgICAgICAgZ2xvYmFsU2NvcGVbVklaX0NPTlRFWFRfS0VZXSA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkdWNrZGIgPSBhd2FpdCBpbml0RHVja2RiKCk7XG4gICAgICAgICAgICBjb25zdCBjb25uID0gYXdhaXQgZHVja2RiLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVml6Q29udGV4dChjb25uKTtcbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFNjb3BlW1ZJWl9DT05URVhUX0tFWV0gYXMgUHJvbWlzZTxWaXpDb250ZXh0Pjtcbn1cblxuZXhwb3J0IHsgVml6Q29udGV4dCwgdml6Q29udGV4dCB9O1xuIiwgImltcG9ydCB7XG4gICAgZ2V0SnNEZWxpdnJCdW5kbGVzLFxuICAgIHNlbGVjdEJ1bmRsZSxcbiAgICBBc3luY0R1Y2tEQixcbiAgICBDb25zb2xlTG9nZ2VyLFxuICAgIEFzeW5jRHVja0RCQ29ubmVjdGlvbixcbiAgICBMb2dMZXZlbCxcbn0gZnJvbSAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AZHVja2RiL2R1Y2tkYi13YXNtQDEuMjkuMC8rZXNtJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXREdWNrZGIoKSB7XG4gICAgY29uc3QgSlNERUxJVlJfQlVORExFUyA9IGdldEpzRGVsaXZyQnVuZGxlcygpO1xuXG4gICAgLy8gU2VsZWN0IGEgYnVuZGxlIGJhc2VkIG9uIGJyb3dzZXIgY2hlY2tzXG4gICAgY29uc3QgYnVuZGxlID0gYXdhaXQgc2VsZWN0QnVuZGxlKEpTREVMSVZSX0JVTkRMRVMpO1xuXG4gICAgY29uc3Qgd29ya2VyX3VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoXG4gICAgICAgIG5ldyBCbG9iKFtgaW1wb3J0U2NyaXB0cyhcIiR7YnVuZGxlLm1haW5Xb3JrZXIhfVwiKTtgXSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcsXG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIC8vIEluc3RhbnRpYXRlIHRoZSBhc3luY2hyb25vdXMgdmVyc2lvbiBvZiBEdWNrREItd2FzbVxuICAgIGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIod29ya2VyX3VybCk7XG4gICAgY29uc3QgbG9nZ2VyID0gbmV3IENvbnNvbGVMb2dnZXIoTG9nTGV2ZWwuV0FSTklORyk7XG4gICAgY29uc3QgZGIgPSBuZXcgQXN5bmNEdWNrREIobG9nZ2VyLCB3b3JrZXIpO1xuICAgIGF3YWl0IGRiLmluc3RhbnRpYXRlKGJ1bmRsZS5tYWluTW9kdWxlLCBidW5kbGUucHRocmVhZFdvcmtlcik7XG4gICAgVVJMLnJldm9rZU9iamVjdFVSTCh3b3JrZXJfdXJsKTtcblxuICAgIHJldHVybiBkYjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JUYWJsZShcbiAgICBjb25uOiBBc3luY0R1Y2tEQkNvbm5lY3Rpb24sXG4gICAgdGFibGU6IHN0cmluZyxcbiAgICB7IHRpbWVvdXQgPSAxMF8wMDAsIGludGVydmFsID0gMjUwIH0gPSB7fVxuKSB7XG4gICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjb25uLnF1ZXJ5KFxuICAgICAgICAgICAgICAgIGBTRUxFQ1QgMVxuICAgICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXNcbiAgICAgICAgIFdIRVJFIHRhYmxlX3NjaGVtYSA9ICdtYWluJ1xuICAgICAgICAgICBBTkQgdGFibGVfbmFtZSAgID0gJyR7dGFibGV9J1xuICAgICAgICAgTElNSVQgMWBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChyZXMubnVtUm93cykgcmV0dXJuOyAvLyBzdWNjZXNzIFx1MjcyOFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBUYWJsZSAke3RhYmxlfSBub3QgeWV0IGF2YWlsYWJsZSwgdHJ5aW5nIGFnYWluIGluICR7aW50ZXJ2YWx9bXMgKGVycm9yOiAke2Vycn0pYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwZXJmb3JtYW5jZS5ub3coKSAtIHQwID4gdGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaW1lZCBvdXQgd2FpdGluZyBmb3IgdGFibGUgXCIke3RhYmxlfVwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIGludGVydmFsKSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7XG4gICAgY29vcmRpbmF0b3IsXG4gICAgTW9zYWljQ2xpZW50LFxuICAgIFNlbGVjdGlvbixcbn0gZnJvbSAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AdXdkYXRhL21vc2FpYy1jb3JlQDAuMTYuMi8rZXNtJztcblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dE9wdGlvbnMge1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGZpbHRlckJ5OiBTZWxlY3Rpb247XG59XG5cbmV4cG9ydCB0eXBlIElucHV0RnVuY3Rpb24gPSAob3B0aW9uczogSW5wdXRPcHRpb25zKSA9PiBIVE1MRWxlbWVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIGlucHV0PFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBJbnB1dD4oXG4gICAgSW5wdXRDbGFzczogVCxcbiAgICAuLi5wYXJhbXM6IENvbnN0cnVjdG9yUGFyYW1ldGVyczxUPlxuKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGlucHV0ID0gbmV3IElucHV0Q2xhc3MoLi4ucGFyYW1zKTtcbiAgICBjb29yZGluYXRvcigpLmNvbm5lY3QoaW5wdXQpO1xuICAgIHJldHVybiBpbnB1dC5lbGVtZW50O1xufVxuXG5leHBvcnQgY2xhc3MgSW5wdXQgZXh0ZW5kcyBNb3NhaWNDbGllbnQge1xuICAgIHB1YmxpYyByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJCeTogU2VsZWN0aW9uLCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcgPSAnaW5wdXQnKSB7XG4gICAgICAgIHN1cGVyKGZpbHRlckJ5KTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSkgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc05hbWUpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5lbGVtZW50LCAndmFsdWUnLCB7IHZhbHVlOiB0aGlzIH0pO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgICAvLyBzdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBJbnB1dE9wdGlvbnMsIElucHV0IH0gZnJvbSAnLi9pbnB1dCc7XG5cbmV4cG9ydCBjbGFzcyBSYWRpbyBleHRlbmRzIElucHV0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJbnB1dE9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucy5maWx0ZXJCeSwgb3B0aW9ucy5lbGVtZW50KTtcbiAgICAgICAgY29uc3Qgc3Ryb25nRWwgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3Ryb25nJyk7XG4gICAgICAgIHN0cm9uZ0VsLmlubmVyVGV4dCA9ICdTVFJPTkcnO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoc3Ryb25nRWwpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBSYWRpbyB9IGZyb20gJy4vcmFkaW8nO1xuaW1wb3J0IHsgaW5wdXQsIElucHV0RnVuY3Rpb24gfSBmcm9tICcuL2lucHV0JztcblxuZXhwb3J0IGNvbnN0IENVU1RPTV9JTlBVVFM6IFJlY29yZDxzdHJpbmcsIElucHV0RnVuY3Rpb24+ID0ge1xuICAgIHJhZGlvOiBvcHRpb25zID0+IGlucHV0KFJhZGlvLCBvcHRpb25zKSxcbn07XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBRUE7QUFBQSxFQUdJO0FBQUEsT0FHRztBQUVQLFNBQVMsZ0JBQWdCOzs7QUNSekIsU0FBUyxxQkFBcUI7QUFFOUI7QUFBQSxFQUNJO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxPQUNHOzs7QUNSUDtBQUFBLEVBQ0k7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUVBO0FBQUEsT0FDRztBQUVQLGVBQXNCLGFBQWE7QUFDL0IsUUFBTSxtQkFBbUIsbUJBQW1CO0FBRzVDLFFBQU0sU0FBUyxNQUFNLGFBQWEsZ0JBQWdCO0FBRWxELFFBQU0sYUFBYSxJQUFJO0FBQUEsSUFDbkIsSUFBSSxLQUFLLENBQUMsa0JBQWtCLE9BQU8sVUFBVyxLQUFLLEdBQUc7QUFBQSxNQUNsRCxNQUFNO0FBQUEsSUFDVixDQUFDO0FBQUEsRUFDTDtBQUdBLFFBQU0sU0FBUyxJQUFJLE9BQU8sVUFBVTtBQUNwQyxRQUFNLFNBQVMsSUFBSSxjQUFjLFNBQVMsT0FBTztBQUNqRCxRQUFNLEtBQUssSUFBSSxZQUFZLFFBQVEsTUFBTTtBQUN6QyxRQUFNLEdBQUcsWUFBWSxPQUFP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
